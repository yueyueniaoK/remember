### static

#### 静态局部变量（Static Local Variables）

在**函数内部**定义的 `static` 变量，其**生命周期延长至整个程序运行期间，但作用域仍限于该函数。**

特点：

- **只初始化一次**，即使函数多次调用，该变量也不会重新初始化。
- **内存分配在全局静态存储区**，而不是栈上。
- **默认初始化为 0**（对于基本数据类型）。

#### 静态全局变量（Static Global Variables）

在全局作用域使用 static修饰变量，使其**仅在当前文件可见**（防止其他文件通过 `extern` 访问）

特点：

- **限制作用域**，避免命名冲突。
- **不存储在栈或堆上**，而是存储在全局静态存储区。

####  静态成员变量（Static Class Member Variables）

在类中定义的static变量，**所有类实例共享同一份数据**。

特点：

- **不属于任何对象**，而是属于类本身。
- **必须在类外初始化**（通常在 `.cpp` 文件中）。
- **可以通过类名直接访问**（无需实例化对象）。

#### 静态成员函数（Static Class Member Functions）

在类中定义的static函数，**不依赖于类的实例**，可以直接通过类名调用。

特点：

- **不能访问非静态成员变量或方法**（因为没有 `this` 指针）。
- **常用于工具函数或管理静态成员变量**。

#### 静态函数（Static Functions in C）

在 C 语言中，static函数的作用是**限制函数仅在当前文件可见**（类似 `static` 全局变量）。

![image-20250808100628408](D:\kaper\笔记\图片\image-20250808100628408.png)

### extern

extern是 C 和 C++ 中**用于声明变量或函数的外部链接性**的关键字，它告诉编译器该符号的定义在其他文件中。extern是**实现多文件程序中共享变量和函数的关键机制，合理使用可以构建模块化的大型程序。**

重要特性

1. **链接性控制**：
   - `extern` 使变量/函数具有外部链接性，可被其他文件访问
   - 与 `static` 形成对比（`static` 限制为内部链接）
2. **不分配存储空间**：
   - `extern` 只是声明，不是定义
   - 真正的定义在其他地方
3. **默认情况**：
   - **函数默认具有外部链接性，所以通常可以省略 `extern`**
   - **全局变量默认也是外部链接的**

**C++ 中的特殊用法**

**(1) 与 const 结合**

```C++
// file1.cpp
extern const int MAX = 100;  // 定义并指定外部链接

// file2.cpp
extern const int MAX;  // 声明外部常量
```

**(2) 与 C 代码交互**

```C++
// C++文件中调用C函数
extern "C" {
    #include "clib.h"
    void c_function();  // 告诉C++用C的方式链接
}
```

常见问题

1.重复定义问题

```C++
// 错误示例
extern int var = 10;  // extern不能与初始化同时使用
```

2.未找到定义

```C++
extern int noSuchVar;  // 声明但未在任何地方定义，链接时会出错
```

3.与static冲突：

```C++
static int hidden = 5;
extern int hidden;  // 错误，static变量不能有外部链接
```

使用方法

1.在头文件中声明变量为 `extern`

```C++
// globals.h
extern int global_count;
```

2.在一个源文件中定义

```C++
// globals.c
int global_count = 0;
```

3.需要时包含头文件

```C++
#include "globals.h"
```

